syntax = "proto3";
package solana_messages;

import "solana/block_message.proto";

enum TokenType {
  SOL = 0;
  WSOL = 1;
  FT = 2;
  NFT = 3;
}

message TokenCreator {
  string Address = 1;
  bool Verified = 2;
  uint64 Share = 3;
}

message TokenInfo {
  string Name = 1;
  string Decimals = 2;
  string Uri = 3;
  string Symbol = 4;
  TokenType TokenType = 5;
  int64 Key = 6;
  int64 SellerFeeBasisPoints = 8;
  int64 EditionNonce = 9;
  int64 TokenStandard = 10;

  string MintAddress = 11;
  string MetadataAddress = 12; 
  string UpdateAuthority = 13;
  string CollectionAddress = 14;

  bool VerifiedCollection = 20;
  bool PrimarySaleHappened = 21;
  bool IsMutable = 22;

  repeated TokenCreator TokenCreators = 31;
}

message TokenTransfer {
  uint32 InstructionIndex = 1;
  uint64 Amount = 2;
  string Sender = 4;
  string Receiver = 5;
  string SenderAuthority = 7;
  string ReceiverAuthority = 8;
  TokenInfo Currency = 9;
}

message InstructionBalanceUpdate {
  uint32 InstructionIndex = 1;
  uint64 PreBalance = 2;
  uint64 PostBalance = 3;
  int64 BalanceDiff = 4;
  int64 CumulativeBalanceDiff = 5;
  string Address = 6; // Same as OwnerAddress, deprecated
  TokenInfo Currency = 7;
  string OwnerAddress = 8;
  string TokenAddress = 9;
}

message TransactionBalanceUpdate {
  uint64 PreBalance = 2;
  uint64 PostBalance = 3;
  int64 BalanceDiff = 4;
  string Address = 6; // Same as OwnerAddress, deprecated
  TokenInfo Currency = 7;
  string OwnerAddress = 8;
  string TokenAddress = 9;
}

message TransfersParsedTransaction {
  string Signature = 1;
  TransactionStatus Status = 2;
  TransactionHeader Header = 3;
  repeated TokenTransfer TokenTransfers = 4;
  repeated InstructionBalanceUpdate InstructionBalanceUpdates = 5;
  repeated TransactionBalanceUpdate BalanceUpdates = 6;
}

message TransfersParsedBlockMessage {
  BlockHeader Header = 1;
  repeated Reward Rewards = 2;
  repeated TransfersParsedTransaction Transactions = 3; 
}
