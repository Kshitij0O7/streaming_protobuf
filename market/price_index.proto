syntax = "proto3";
package marketdata_messages;

import "market/marketdata.proto";

message Currency {
  string Id = 1;
  string Name = 2;
  string Symbol = 3;
}

message Quote {
  Currency QuoteCurrency = 1;
  double BaseAmount = 3;
  double QuoteAmount = 4;
  double UsdAmount = 5;
}

message IntervalPrice {
  TimeInterval TimeInterval = 1;
  double PriceInUsd = 2;
  double UsdAmount = 3;
  double TokenAmount = 4;
}

message TimeInterval {
  uint32 Duration = 1;
  uint32 Start = 2;
  uint32 End = 3;
}

message Ohlc {
  double Open = 2;
  double Close = 3;
  double High = 4;
  double Low = 5;
  double Volume = 6;
}

message AveragePriceByTimeInterval {
  TimeInterval TimeInterval = 1;

  Ohlc Ohlc = 2;

  repeated  IntervalPrice Historical  = 3;

  double SimpleMovingAverage = 4;
  double WeightedSimpleMovingAverage = 5;
  double ExponentialMovingAverage = 6;

}

message AveragePriceByVolume {
  double TargetVolume = 1;
  IntervalPrice AveragePrice = 3;
}

message CurrencyUpdate {
  Currency Currency = 1;
  repeated Quote Quotes = 2;
  repeated AveragePriceByTimeInterval AveragePriceByTimeIntervals = 3;
  repeated AveragePriceByVolume AveragePriceByVolumes = 4;
}

message PriceIndexMessage {
  uint64 Time = 1;
  repeated CurrencyUpdate CurrencyUpdates = 2;
}
